import os


def count_files_with_ld_json(directory="html_dumps"):
    total_files = 0
    files_with_ld_json = 0

    for filename in os.listdir(directory):
        filepath = os.path.join(directory, filename)

        if os.path.isfile(filepath):
            total_files += 1
            try:
                with open(filepath, "r", encoding="utf-8") as f:
                    content = f.read()
                    if "ld+json" in content:
                        files_with_ld_json += 1
            except Exception as e:
                print(f"Error reading {filename}: {e}")

    print(f"Total files: {total_files}")
    print(f"Files containing 'ld+json': {files_with_ld_json}")


# Run the function
count_files_with_ld_json()


sample = {
    "URL": "https://www.politico.eu/article/britains-starmer-suspends-tariffs-on-89-products-amid-trumps-trade-war/",
    "raw_html": '<article class="article">\n<div class="sidebar-grid sidebar-grid--is-narrow">\n<div class="sidebar-grid__container">\n<header class="sidebar-grid__header article__header">\n\n<div class="hero article__hero">\n<h1 class="hero__title">\n\t\t\t\tUK suspends some tariffs to help firms cope with Trump’s trade war\t\t\t</h1>\n<p class="hero__excerpt">\n\t\t\t\tSuspension of import duties on a range of 89 products extends to mid-2027. \t\t\t</p>\n<div class="hero__actions">\n\n</div>\n<div class="hero__media">\n<figure>\n<img alt="His Majesty The King, The Prime Minister and The Deputy Prime Minister Visit Newquay" class="" decoding="async" fetchpriority="high" height="643" loading="eager" pinger-seen="true" role="" sizes="(max-width: 965px) 100vw, 965px" src="https://www.politico.eu/cdn-cgi/image/width=1160,height=773,quality=80,onerror=redirect,format=auto/wp-content/uploads/2025/04/13/GettyImages-2198714967-scaled.jpg" srcset="https://www.politico.eu/cdn-cgi/image/width=480,quality=80,onerror=redirect,format=auto/wp-content/uploads/2025/04/13/GettyImages-2198714967-scaled.jpg 480w, https://www.politico.eu/cdn-cgi/image/width=768,quality=80,onerror=redirect,format=auto/wp-content/uploads/2025/04/13/GettyImages-2198714967-scaled.jpg 768w, https://www.politico.eu/cdn-cgi/image/width=1024,quality=80,onerror=redirect,format=auto/wp-content/uploads/2025/04/13/GettyImages-2198714967-scaled.jpg 1024w, https://www.politico.eu/cdn-cgi/image/width=1280,quality=80,onerror=redirect,format=auto/wp-content/uploads/2025/04/13/GettyImages-2198714967-scaled.jpg 1280w, https://www.politico.eu/cdn-cgi/image/width=1440,quality=80,onerror=redirect,format=auto/wp-content/uploads/2025/04/13/GettyImages-2198714967-scaled.jpg 1440w, https://www.politico.eu/cdn-cgi/image/width=1920,quality=80,onerror=redirect,format=auto/wp-content/uploads/2025/04/13/GettyImages-2198714967-scaled.jpg 1920w, https://www.politico.eu/cdn-cgi/image/width=2640,quality=80,onerror=redirect,format=auto/wp-content/uploads/2025/04/13/GettyImages-2198714967-scaled.jpg 2640w" width="965"/>\n<figcaption>\n<div class="figcaption__inner">\n\t\t\t\t\t\tStarmer has said the U.K. will “keep calm and fight for the best deal with the U.S.” while also working with other countries to reduce trade barriers. | Leon Neal/Getty Images\t\t\t\t\t</div>\n</figcaption>\n</figure>\n</div>\n<div class="article-meta">\n<div class="articla-meta__datetime-duration">\n<div class="date-time article-meta__date-time before-title">\n<span class="date-time__date">\n\t\t\tApril 13, 2025\t\t</span>\n<span class="date-time__time">\n\t\t\t12:48 pm CET\t\t</span>\n</div>\n</div>\n<div class="authors article-meta__authors">\n\t\n\tBy \n\t\t\t<a href="https://www.politico.eu/author/eliza-gkritsi/">\n\t\t\tEliza Gkritsi\t\t</a>\n</div>\n</div>\n</div>\n</header>\n<div class="sidebar-grid__content article__content">\n<p>United Kingdom Prime Minister Keir Starmer is suspending tariffs on 89 products in order to ease pressure on companies affected by Washington\'s trade war.</p>\n<p>The <a data-id="https://www.gov.uk/government/news/government-cuts-price-of-everyday-items-and-summer-essentials?utm_medium=email&amp;utm_campaign=govuk-notifications-topic&amp;utm_source=a6c82ff1-2743-45b2-b2f6-c860a50da430&amp;utm_content=immediately" data-type="link" href="https://www.gov.uk/government/news/government-cuts-price-of-everyday-items-and-summer-essentials?utm_medium=email&amp;utm_campaign=govuk-notifications-topic&amp;utm_source=a6c82ff1-2743-45b2-b2f6-c860a50da430&amp;utm_content=immediately" target="_blank">suspension of tariffs</a> on a range of products from electric vehicle batteries to agave syrup extends until July 2027, the government said in <a data-id="https://www.gov.uk/government/news/government-cuts-price-of-everyday-items-and-summer-essentials?utm_medium=email&amp;utm_campaign=govuk-notifications-topic&amp;utm_source=a6c82ff1-2743-45b2-b2f6-c860a50da430&amp;utm_content=immediately" data-type="link" href="https://www.gov.uk/government/news/government-cuts-price-of-everyday-items-and-summer-essentials?utm_medium=email&amp;utm_campaign=govuk-notifications-topic&amp;utm_source=a6c82ff1-2743-45b2-b2f6-c860a50da430&amp;utm_content=immediately" target="_blank">a statement</a>.</p>\n<p>The move is part of a wider drive to protect British firms from United States President Donald Trump\'s tariffs, including an increase in state-backed loans for companies, the Telegraph <a href="https://www.telegraph.co.uk/politics/2025/04/12/starmer-suspends-import-tariffs-help-firms-survive-trump/" target="_blank">reported</a>.</p>\n</div></div><div class="ad full-bleed ad__instory-1"><!-- AD UNIT Instory-1 -->\n<span class="ad-label">Advertisement</span>\n<div class="ad-wrapper">\n<div class="ad-inner">\n<div id="instory-1">\n</div>\n</div>\n</div></div><div class="sidebar-grid__container"><div class="sidebar-grid__content article__content">\n<p>The British government claims the initiative will save U.K. businesses £17 million, which could be passed on to consumers.</p>\n<p>The U.K. was <a href="https://commonslibrary.parliament.uk/research-briefings/cbp-10240/" target="_blank">slammed</a> with 10 percent U.S. tariffs across the board on April 2, on top of 25 percent duties on aluminum, steel, vehicles and car parts.</p>\n<p>On Saturday, the House of Lords approved emergency legislation giving the government the power to bring the last remaining source of virgin steel in the U.K., <a data-id="https://www.politico.eu/article/britains-mps-vote-to-take-control-of-british-steel/" data-type="link" href="https://www.politico.eu/article/britains-mps-vote-to-take-control-of-british-steel/">British Steel</a>, under state control. The U.S. is the <a href="https://www.uksteel.org/steel-news-2025/us-25-tariffs-on-uk-steel-imports-come-into-effect" target="_blank">second-most important export market</a> for British steel after the European Union.</p>\n<p>Starmer has <a href="https://pro.politico.eu/news/197055" target="_blank">said</a> the U.K. will “keep calm and fight for the best deal with the U.S.” while also working with other countries to reduce trade barriers.</p>\n<p>Under the tariff plan announced Sunday, the products that will now face zero import duties when entering the U.K. also include pasta, canned pineapples, fruit juice, coconut oil, plywood and plastics.</p>\n</div>\n\n</div>\n</div>\n\n</article>',
}
